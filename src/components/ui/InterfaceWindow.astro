---
/**
 * InterfaceWindow - Computer screen/terminal style window with title bar
 *
 * Based on the Proactive Intelligence section network monitor design.
 * Features macOS-style traffic light dots, title, and optional badge.
 */

interface Props {
  title?: string;
  badge?: string;
  badgeVariant?: 'default' | 'critical' | 'success' | 'warning' | 'info';
  theme?: 'light' | 'dark';
  showDots?: boolean;
  class?: string;
}

const {
  title = 'Terminal',
  badge,
  badgeVariant = 'default',
  theme = 'dark',
  showDots = true,
  class: className = ''
} = Astro.props;
---

<div
  class:list={[
    'interface-window',
    `interface-window--${theme}`,
    className
  ]}
>
  <div class="interface-window__titlebar">
    {showDots && (
      <div class="interface-window__dots">
        <span class="dot dot--red"></span>
        <span class="dot dot--yellow"></span>
        <span class="dot dot--green"></span>
      </div>
    )}
    <span class="interface-window__title">{title}</span>
    {badge && (
      <div class:list={['interface-window__badge', `interface-window__badge--${badgeVariant}`]}>
        {badge}
      </div>
    )}
  </div>
  <div class="interface-window__content">
    <slot />
  </div>
</div>

<style>
  .interface-window {
    position: relative;
    border-radius: var(--radius-md);
    overflow: hidden;
    transition: all var(--duration-normal) ease;
  }

  .interface-window:hover {
    transform: translateY(-2px);
  }

  /* ========================================
     DARK THEME
     ======================================== */
  .interface-window--dark {
    background: var(--color-bg-dark-95, rgba(10, 10, 10, 0.95));
    border: 1px solid var(--color-white-10);
    box-shadow:
      0 4px 24px var(--color-black-40),
      0 1px 3px var(--color-black-20);
  }

  .interface-window--dark:hover {
    border-color: var(--color-white-15);
    box-shadow:
      0 8px 32px var(--color-black-50),
      0 0 20px var(--color-black-30);
  }

  .interface-window--dark .interface-window__titlebar {
    background: var(--color-bg-dark-90, rgba(10, 10, 10, 0.9));
    border-bottom: 1px solid var(--color-white-6);
  }

  .interface-window--dark .interface-window__title {
    color: var(--color-white-50);
  }

  /* ========================================
     LIGHT THEME
     ======================================== */
  .interface-window--light {
    background: #ffffff;
    border: 1px solid var(--color-black-10);
    box-shadow:
      0 4px 24px var(--color-black-10),
      0 1px 3px var(--color-black-5);
  }

  .interface-window--light:hover {
    border-color: var(--color-black-15);
    box-shadow:
      0 8px 32px var(--color-black-15),
      0 0 20px var(--color-black-5);
  }

  .interface-window--light .interface-window__titlebar {
    background: var(--color-bg-secondary);
    border-bottom: 1px solid var(--color-black-8);
  }

  .interface-window--light .interface-window__title {
    color: var(--color-text-muted);
  }

  /* ========================================
     TITLEBAR STYLES
     ======================================== */
  .interface-window__titlebar {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.625rem 1rem;
  }

  .interface-window__dots {
    display: flex;
    gap: 6px;
  }

  .dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
  }

  .dot--red {
    background: var(--color-error, #ef4444);
  }

  .dot--yellow {
    background: var(--color-warning, #f59e0b);
  }

  .dot--green {
    background: var(--color-success, #22c55e);
  }

  .interface-window__title {
    font-family: var(--font-mono);
    font-size: var(--text-2xs);
    font-weight: 500;
    flex: 1;
  }

  /* ========================================
     BADGE STYLES
     ======================================== */
  .interface-window__badge {
    font-family: var(--font-mono);
    font-size: var(--text-3xs);
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    padding: 0.2rem 0.5rem;
    border-radius: var(--radius-sm);
  }

  .interface-window__badge--default {
    background: var(--color-white-10);
    color: var(--color-text-muted);
    border: 1px solid var(--color-white-10);
  }

  .interface-window__badge--critical {
    background: var(--color-error-20, rgba(239, 68, 68, 0.2));
    color: var(--color-error, #ef4444);
    border: 1px solid var(--color-error-30, rgba(239, 68, 68, 0.3));
  }

  .interface-window__badge--success {
    background: var(--color-success-20);
    color: var(--color-success);
    border: 1px solid var(--color-success-30);
  }

  .interface-window__badge--warning {
    background: rgba(245, 158, 11, 0.2);
    color: var(--color-warning, #f59e0b);
    border: 1px solid rgba(245, 158, 11, 0.3);
  }

  .interface-window__badge--info {
    background: var(--color-info-20, rgba(59, 130, 246, 0.2));
    color: var(--color-info, #3b82f6);
    border: 1px solid rgba(59, 130, 246, 0.3);
  }

  /* Light theme badge adjustments */
  .interface-window--light .interface-window__badge--default {
    background: var(--color-black-5);
    border-color: var(--color-black-10);
  }

  /* ========================================
     CONTENT STYLES
     ======================================== */
  .interface-window__content {
    padding: 1rem 1.25rem;
  }

  /* ========================================
     RESPONSIVE
     ======================================== */
  @media (max-width: 768px) {
    .interface-window__titlebar {
      padding: 0.5rem 0.875rem;
    }

    .dot {
      width: 8px;
      height: 8px;
    }

    .interface-window__content {
      padding: 0.875rem 1rem;
    }
  }
</style>

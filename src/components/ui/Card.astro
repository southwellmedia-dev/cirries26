---
interface Props {
  variant?: 'default' | 'elevated' | 'bordered' | 'feature';
  href?: string;
  class?: string;
  padding?: 'none' | 'sm' | 'md' | 'lg';
}

const {
  variant = 'default',
  href,
  class: className = '',
  padding = 'md'
} = Astro.props;

const Tag = href ? 'a' : 'div';
const linkProps = href ? { href } : {};
---

<Tag
  class:list={[
    'card',
    `card--${variant}`,
    `card--padding-${padding}`,
    { 'card--interactive': !!href },
    className
  ]}
  {...linkProps}
>
  <slot />
  {variant === 'feature' && <div class="card__glow" aria-hidden="true"></div>}
</Tag>

<style>
  .card {
    position: relative;
    display: block;
    background-color: var(--color-bg-card);
    border-radius: var(--radius-xl);
    overflow: hidden;
    transition:
      transform var(--duration-normal) var(--ease-out),
      box-shadow var(--duration-normal) var(--ease-out),
      border-color var(--duration-normal) var(--ease-out);
  }

  /* Padding variants */
  .card--padding-none {
    padding: 0;
  }

  .card--padding-sm {
    padding: var(--space-4);
  }

  .card--padding-md {
    padding: var(--space-6);
  }

  .card--padding-lg {
    padding: var(--space-8);
  }

  /* Card variants */
  .card--default {
    border: 1px solid var(--color-border);
  }

  .card--elevated {
    border: 1px solid var(--color-border-subtle);
    box-shadow: var(--shadow-card);
  }

  .card--bordered {
    border: 1px solid var(--color-border);
  }

  .card--feature {
    border: 1px solid var(--color-border);
    background: linear-gradient(
      135deg,
      var(--color-bg-card) 0%,
      var(--color-black-80) 100%
    );
  }

  /* Interactive states */
  .card--interactive {
    cursor: pointer;
    text-decoration: none;
  }

  .card--interactive:hover {
    transform: translateY(-4px);
    border-color: var(--color-border-hover);
    box-shadow: var(--shadow-card-hover);
  }

  .card--feature:hover .card__glow {
    opacity: 1;
  }

  /* Feature card glow effect */
  .card__glow {
    position: absolute;
    inset: 0;
    background: radial-gradient(
      circle at 50% 100%,
      var(--color-primary-subtle) 0%,
      transparent 60%
    );
    opacity: 0;
    transition: opacity var(--duration-slow) var(--ease-out);
    pointer-events: none;
  }

  /* Focus state for links */
  .card--interactive:focus-visible {
    outline: 2px solid var(--color-primary);
    outline-offset: 4px;
  }
</style>

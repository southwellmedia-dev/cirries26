---
/**
 * MeetHomeBroadbandSection - "Meet Home Broadband" intro section
 *
 * Features a Wi-Fi hub visualization with pulsating signal waves
 * and connected device nodes (TV, computer, laptop, phone)
 */
import Container from "../../ui/Container.astro";
import Button from "../../ui/Button.astro";
import WifiNetworkViz from "./WifiNetworkViz.astro";

interface DeviceNode {
  label: string;
  icon: string;
  position: { angle: number; distance: number };
  signalStrength: 1 | 2 | 3;
}

interface Props {
  eyebrow?: string;
  title?: string;
  highlightText?: string;
  paragraphs?: string[];
  primaryCta?: { label: string; href: string };
  secondaryCta?: { label: string; href: string };
  devices?: DeviceNode[];
}

const {
  eyebrow = "Home Wi-Fi Intelligence",
  title = "Stop Getting Blamed for Your Customers'",
  highlightText = "Bad Wi-Fi",
  paragraphs = [
    "DART-AI gives you <strong>visibility and control beyond your network edge</strong>, empowering you to proactively diagnose and fix home Wi-Fi issues.",
    "Slash support costs, end needless truck rolls, and turn your biggest source of churn into a <strong>competitive advantage.</strong>",
  ],
  primaryCta = { label: "Take Control of Home Wi-Fi", href: "/contact" },
  secondaryCta = { label: "View All Solutions", href: "/solutions" },
  devices = [
    {
      label: "Smart TV",
      icon: "M2 6a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-6l2 2v1H8v-1l2-2H4a2 2 0 0 1-2-2V6zm2 0v10h16V6H4z",
      position: { angle: -45, distance: 160 },
      signalStrength: 3,
    },
    {
      label: "Desktop",
      icon: "M4 4h16a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-5l1 2v1H8v-1l1-2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2zm0 2v10h16V6H4z M9 18h6",
      position: { angle: 45, distance: 165 },
      signalStrength: 2,
    },
    {
      label: "Laptop",
      icon: "M4 5a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V5zm2 0v10h12V5H6zM2 18a1 1 0 0 1 1-1h18a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1v-1z",
      position: { angle: 135, distance: 155 },
      signalStrength: 1,
    },
    {
      label: "Phone",
      icon: "M7 2a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H7zm5 18a1 1 0 1 1 0-2 1 1 0 0 1 0 2z",
      position: { angle: -135, distance: 150 },
      signalStrength: 3,
    },
  ],
} = Astro.props;
---

<section class="meet-broadband-section" data-theme="light">
  <!-- Signal wave background system -->
  <div class="signal-bg">
    <div class="signal-gradient"></div>
    <div class="signal-grid"></div>
    <div class="signal-noise"></div>
  </div>

  <Container size="xl">
    <div class="meet-broadband">
      <div class="meet-broadband__content">
        <span class="meet-broadband__eyebrow">{eyebrow}</span>

        <h2 class="meet-broadband__title">
          {title} <span>{highlightText}</span>
        </h2>

        {
          paragraphs.map((text) => (
            <p class="meet-broadband__text" set:html={text} />
          ))
        }

        <div class="meet-broadband__actions">
          <Button href={primaryCta.href} variant="primary">
            {primaryCta.label}
          </Button>
          <Button href={secondaryCta.href} variant="outline-dark">
            {secondaryCta.label}
          </Button>
        </div>
      </div>

      <!-- Wi-Fi Hub Visualization -->
      <WifiNetworkViz devices={devices} />
    </div>
  </Container>
</section>

<style>
  /* ========================================
     SIGNAL BACKGROUND SYSTEM
     ======================================== */
  .meet-broadband-section {
    position: relative;
    padding: var(--space-20) 0;
    background: var(--color-bg-card);
    overflow: hidden;
  }

  .signal-bg {
    position: absolute;
    inset: 0;
    z-index: 0;
  }

  .signal-gradient {
    position: absolute;
    inset: 0;
    background:
      radial-gradient(
        ellipse 100% 80% at 80% 40%,
        var(--color-primary-5) 0%,
        transparent 50%
      ),
      radial-gradient(
        ellipse 60% 60% at 20% 80%,
        var(--color-primary-3) 0%,
        transparent 40%
      ),
      radial-gradient(
        circle at 70% 30%,
        var(--color-primary-4) 0%,
        transparent 30%
      ),
      linear-gradient(180deg, var(--color-bg-card) 0%, var(--color-bg-secondary) 50%, var(--color-bg-tertiary) 100%);
  }

  .signal-grid {
    position: absolute;
    inset: 0;
    background-image:
      linear-gradient(var(--color-black-2) 1px, transparent 1px),
      linear-gradient(90deg, var(--color-black-2) 1px, transparent 1px);
    background-size: 40px 40px;
    mask-image: radial-gradient(
      ellipse 90% 80% at 70% 50%,
      black 20%,
      transparent 70%
    );
    -webkit-mask-image: radial-gradient(
      ellipse 90% 80% at 70% 50%,
      black 20%,
      transparent 70%
    );
  }

  .signal-noise {
    position: absolute;
    inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
    opacity: 0.02;
    mix-blend-mode: multiply;
  }

  /* ========================================
     CONTENT LAYOUT
     ======================================== */
  .meet-broadband {
    position: relative;
    z-index: 1;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--space-12);
    align-items: center;
  }

  .meet-broadband__eyebrow {
    display: inline-block;
    margin-bottom: var(--space-4);
    font-family: var(--font-display);
    font-size: var(--text-sm);
    font-weight: var(--font-semibold);
    text-transform: uppercase;
    letter-spacing: var(--tracking-wider);
    color: var(--color-primary);
  }

  .meet-broadband__title {
    font-family: var(--font-display);
    font-size: clamp(1.75rem, 3.5vw, 2.75rem);
    font-weight: var(--font-bold);
    line-height: 1.15;
    letter-spacing: var(--tracking-tight);
    color: var(--color-text-primary);
    margin-bottom: var(--space-6);
  }

  .meet-broadband__title span {
    color: var(--color-primary);
  }

  .meet-broadband__text {
    font-family: var(--font-body);
    font-size: var(--text-base);
    line-height: var(--leading-relaxed);
    color: var(--color-text-secondary);
    margin-bottom: var(--space-4);
  }

  .meet-broadband__text :global(strong) {
    color: var(--color-text-primary);
    font-weight: var(--font-semibold);
  }

  .meet-broadband__actions {
    display: flex;
    gap: var(--space-4);
    margin-top: var(--space-8);
  }

  /* ========================================
     RESPONSIVE
     ======================================== */
  @media (max-width: 1024px) {
    .meet-broadband {
      grid-template-columns: 1fr;
      gap: var(--space-12);
    }
  }

  @media (max-width: 768px) {
    .meet-broadband-section {
      padding: var(--space-12) 0;
    }

    .meet-broadband__title {
      font-size: var(--text-2xl);
    }

    .meet-broadband__actions {
      flex-direction: column;
    }
  }
</style>

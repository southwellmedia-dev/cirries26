---
/**
 * MLCapabilitiesSection - Complete ML Capabilities with editorial design
 *
 * Shows all four ML capabilities (Dynamic Baseline, Predictive, Root Cause, Capacity)
 * in a dramatic, typography-driven dark layout with comparison table.
 */
import Container from "../../ui/Container.astro";

interface Capability {
  number: string;
  title: string;
  problem: string;
  solution: string;
}

interface Props {
  badge?: string;
  title?: string;
  titleHighlight?: string;
  capabilities?: Capability[];
}

const {
  badge = "ML-Powered Intelligence",
  title = "Beyond Detection:",
  titleHighlight = "Predictive Action",
  capabilities = [
    {
      number: "01",
      title: "Establishes a Dynamic Performance Baseline",
      problem: "Traditional monitoring tools use static \"high/low\" thresholds that trigger constant false positives or miss subtle, service-degrading issues.",
      solution: "Upon deployment, our ML models begin by ingesting your real-time and historical packet, flow, and device data (SNMP, etc.). It doesn't just look at averages; it learns the unique \"rhythm\" of your network—including normal peaks, valleys, and application-specific behaviors—across different times of day, week, and month. This multi-dimensional, constantly evolving baseline is the foundation for all true anomaly detection."
    },
    {
      number: "02",
      title: "Employs Predictive Analytics for Proactive Rerouting",
      problem: "By the time a link is saturated and packets are dropped, the user experience is already ruined.",
      solution: "DART AI uses time-series forecasting models to predict traffic volume and link utilization minutes or even hours into the future. When it anticipates impending congestion or latency that would violate your baseline, it automatically calculates and recommends (or applies) an optimal alternate path before performance is impacted. This isn't simple failover; it's intelligent, proactive load management."
    },
    {
      number: "03",
      title: "Provides Contextual Root Cause Analysis",
      problem: "An alert that says \"High Latency on Server X\" is useless noise. Teams need to know why.",
      solution: "When an anomaly is detected, DART AI's ML engine performs real-time correlation across thousands of metrics. It asks: \"What else happened at the exact same time?\" It automatically clusters related events, differentiating between symptoms (slow application) and the root cause (a specific DNS resolution delay, a failing NIC on a switch, or a misconfigured QoS policy). This turns a flood of alerts into a single, actionable insight with supporting evidence."
    },
    {
      number: "04",
      title: "Automates Capacity and Resource Planning",
      problem: "Forecasting future network needs is often a mix of guesswork and over-provisioning.",
      solution: "By analyzing long-term trends, our models provide accurate, data-driven forecasts for future capacity needs. It can answer critical questions like: \"Based on our current growth trajectory, when will we need to upgrade the link to our AWS East region?\" or \"Which branch offices are most at risk of bandwidth constraints next quarter?\" This transforms capacity planning from a reactive exercise into a strategic, budget-friendly process."
    }
  ]
} = Astro.props;
---

<section class="capabilities-section" data-theme="dark">
  <!-- Atmospheric background -->
  <div class="section-bg">
    <div class="grid-pattern"></div>
    <div class="glow-orb glow-orb--top"></div>
    <div class="glow-orb glow-orb--bottom"></div>
  </div>

  <Container size="xl">
    <!-- Header -->
    <header class="section-header">
      <span class="section-badge">{badge}</span>
      <h2 class="section-title">
        {title} <em class="title-highlight">{titleHighlight}</em>
      </h2>
    </header>

    <!-- Capabilities - Stacked Editorial Cards -->
    <div class="capabilities-stack">
      {capabilities.map((cap, index) => (
        <article class="capability-card" style={`--card-index: ${index}`}>
          <div class="card-inner">
            <!-- Large number watermark -->
            <span class="card-number">{cap.number}</span>

            <div class="card-content">
              <h3 class="card-title">{cap.title}</h3>

              <div class="card-body">
                <div class="problem-section">
                  <div class="section-marker">
                    <span class="marker-line"></span>
                    <span class="marker-label">The Problem</span>
                  </div>
                  <p class="section-text">{cap.problem}</p>
                </div>

                <div class="solution-section">
                  <div class="section-marker section-marker--highlight">
                    <span class="marker-line"></span>
                    <span class="marker-label">The Solution</span>
                  </div>
                  <p class="section-text">{cap.solution}</p>
                </div>
              </div>
            </div>
          </div>
        </article>
      ))}
    </div>

    <!-- Closing Statement -->
    <div class="section-statement">
      <p class="statement-text">
        This multi-dimensional, constantly evolving baseline is the foundation for all <em>true anomaly detection</em>—from performance bottlenecks to emerging security threats.
      </p>
    </div>
  </Container>
</section>

<style>
  /* ========================================
     CAPABILITIES SECTION - Dark Editorial
     ======================================== */
  .capabilities-section {
    position: relative;
    padding: var(--space-24) 0;
    background: var(--color-bg-primary);
    color: var(--color-text-primary);
    overflow: hidden;
  }

  /* Atmospheric Background */
  .section-bg {
    position: absolute;
    inset: 0;
    pointer-events: none;
  }

  .grid-pattern {
    position: absolute;
    inset: 0;
    background-image:
      linear-gradient(var(--color-white-2) 1px, transparent 1px),
      linear-gradient(90deg, var(--color-white-2) 1px, transparent 1px);
    background-size: 60px 60px;
    mask-image: radial-gradient(ellipse 70% 50% at 50% 30%, black 0%, transparent 70%);
    -webkit-mask-image: radial-gradient(ellipse 70% 50% at 50% 30%, black 0%, transparent 70%);
  }

  .glow-orb {
    position: absolute;
    border-radius: 50%;
    filter: blur(100px);
  }

  .glow-orb--top {
    top: -200px;
    right: -100px;
    width: 500px;
    height: 500px;
    background: var(--color-primary);
    opacity: 0.08;
  }

  .glow-orb--bottom {
    bottom: -150px;
    left: -100px;
    width: 400px;
    height: 400px;
    background: var(--color-primary);
    opacity: 0.05;
  }

  /* Header */
  .section-header {
    text-align: center;
    margin-bottom: var(--space-16);
    position: relative;
    z-index: 1;
  }

  .section-badge {
    display: inline-block;
    padding: var(--space-2) var(--space-5);
    font-family: var(--font-display);
    font-size: var(--text-xs);
    font-weight: var(--font-bold);
    text-transform: uppercase;
    letter-spacing: var(--tracking-widest);
    color: var(--color-primary);
    background: var(--color-primary-muted);
    border: 1px solid var(--color-primary-subtle);
    border-radius: 100px;
    margin-bottom: var(--space-5);
  }

  .section-title {
    font-family: var(--font-display);
    font-size: clamp(2.25rem, 5vw, 3.5rem);
    font-weight: var(--font-bold);
    line-height: 1.1;
    letter-spacing: var(--tracking-tight);
  }

  .title-highlight {
    color: var(--color-text-primary);
    font-style: normal;
  }

  /* Capabilities Stack */
  .capabilities-stack {
    display: flex;
    flex-direction: column;
    gap: var(--space-6);
    margin-bottom: var(--space-12);
    position: relative;
    z-index: 1;
  }

  /* Capability Card */
  .capability-card {
    position: relative;
    animation: cardReveal 0.6s ease forwards;
    animation-delay: calc(var(--card-index) * 0.15s);
    opacity: 0;
  }

  @keyframes cardReveal {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .card-inner {
    position: relative;
    display: grid;
    grid-template-columns: auto 1fr;
    gap: var(--space-8);
    padding: var(--space-10);
    background: var(--color-bg-card);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-xl);
    overflow: hidden;
    transition: all var(--duration-slow) cubic-bezier(0.4, 0, 0.2, 1);
  }

  .capability-card:hover .card-inner {
    border-color: var(--color-primary-subtle);
    transform: translateX(8px);
    box-shadow:
      -8px 0 0 var(--color-primary),
      var(--shadow-lg);
  }

  .card-number {
    font-family: var(--font-display);
    font-size: clamp(4rem, 8vw, 6rem);
    font-weight: var(--font-extrabold);
    line-height: 1;
    color: var(--color-text-primary);
    opacity: 0.08;
    transition: all var(--duration-slow) ease;
    user-select: none;
  }

  .capability-card:hover .card-number {
    opacity: 0.15;
  }

  .card-content {
    display: flex;
    flex-direction: column;
    gap: var(--space-6);
  }

  .card-title {
    font-family: var(--font-display);
    font-size: clamp(1.25rem, 2.5vw, 1.5rem);
    font-weight: var(--font-bold);
    color: var(--color-text-primary);
    line-height: 1.3;
    max-width: 600px;
  }

  .card-body {
    display: grid;
    grid-template-columns: 1fr 1.5fr;
    gap: var(--space-8);
  }

  /* Problem/Solution Sections */
  .problem-section,
  .solution-section {
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
  }

  .section-marker {
    display: flex;
    align-items: center;
    gap: var(--space-3);
  }

  .marker-line {
    width: 24px;
    height: 2px;
    background: var(--color-text-muted);
    transition: all var(--duration-normal) ease;
  }

  .section-marker--highlight .marker-line {
    background: var(--color-primary);
    width: 32px;
  }

  .marker-label {
    font-family: var(--font-display);
    font-size: var(--text-2xs);
    font-weight: var(--font-bold);
    text-transform: uppercase;
    letter-spacing: var(--tracking-wider);
    color: var(--color-text-muted);
  }

  .section-marker--highlight .marker-label {
    color: var(--color-primary);
  }

  .section-text {
    font-family: var(--font-body);
    font-size: var(--text-sm);
    line-height: 1.7;
    color: var(--color-text-secondary);
    margin: 0;
  }

  .solution-section .section-text {
    color: var(--color-text-primary);
    opacity: 0.9;
  }

  /* Section Statement */
  .section-statement {
    text-align: center;
    max-width: 800px;
    margin: 0 auto var(--space-16);
    padding: var(--space-8) 0;
    position: relative;
    z-index: 1;
  }

  .statement-text {
    font-family: var(--font-display);
    font-size: clamp(1.125rem, 2vw, 1.375rem);
    font-weight: var(--font-medium);
    line-height: 1.6;
    color: var(--color-text-secondary);
    margin: 0;
  }

  .statement-text em {
    color: var(--color-text-primary);
    font-style: normal;
    font-weight: var(--font-semibold);
  }

  /* ========================================
     RESPONSIVE
     ======================================== */
  @media (max-width: 1024px) {
    .card-inner {
      grid-template-columns: 1fr;
      gap: var(--space-4);
    }

    .card-number {
      position: absolute;
      top: var(--space-4);
      right: var(--space-4);
      font-size: 3rem;
    }

    .card-body {
      grid-template-columns: 1fr;
      gap: var(--space-5);
    }
  }

  @media (max-width: 768px) {
    .capabilities-section {
      padding: var(--space-16) 0;
    }

    .section-title {
      font-size: var(--text-3xl);
    }

    .card-inner {
      padding: var(--space-6);
    }

    .card-title {
      font-size: var(--text-lg);
      padding-right: 3rem;
    }

    .statement-text {
      font-size: var(--text-base);
    }
  }
</style>

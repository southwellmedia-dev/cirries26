---
/**
 * CaseStudyTestimonial - Editorial pull quote testimonial
 *
 * Large-format testimonial with dramatic typography,
 * decorative elements, and subtle animation.
 */
import Container from "../../ui/Container.astro";

interface Props {
  quote: string;
  author?: string;
  role?: string;
  company?: string;
}

const {
  quote = "DART AI has transformed our network operations, providing real-time insights and automated solutions to mitigate jitter and packet loss. This has significantly improved the performance and reliability of our medical device remote communications.",
  author,
  role = "IT Technical Lead",
  company
} = Astro.props;
---

<section class="case-testimonial" data-theme="light">
  <!-- Background -->
  <div class="case-testimonial__bg">
    <div class="case-testimonial__gradient"></div>
    <div class="case-testimonial__pattern"></div>
  </div>

  <Container size="xl">
    <div class="case-testimonial__wrapper">
      <!-- Decorative Quote Mark -->
      <div class="case-testimonial__quote-mark" aria-hidden="true">
        <svg width="120" height="96" viewBox="0 0 120 96" fill="none">
          <path d="M26.4 96C18.8 96 12.4 93.2 7.2 87.6C2.4 82 0 74.8 0 66C0 54.8 3.6 44.4 10.8 34.8C18 25.2 28.8 16.4 43.2 8.4L52.8 22.8C43.2 28 35.6 33.8 30 40.2C24.4 46.2 21.6 52.4 21.6 58.8C21.6 61.2 22.2 63.2 23.4 64.8C27 62.4 31 61.2 35.4 61.2C41.4 61.2 46.4 63.2 50.4 67.2C54.4 71.2 56.4 76.4 56.4 82.8C56.4 88.4 54.2 93 49.8 96.6C45.4 99.8 40.4 96 26.4 96ZM90 96C82.4 96 76 93.2 70.8 87.6C66 82 63.6 74.8 63.6 66C63.6 54.8 67.2 44.4 74.4 34.8C81.6 25.2 92.4 16.4 106.8 8.4L116.4 22.8C106.8 28 99.2 33.8 93.6 40.2C88 46.2 85.2 52.4 85.2 58.8C85.2 61.2 85.8 63.2 87 64.8C90.6 62.4 94.6 61.2 99 61.2C105 61.2 110 63.2 114 67.2C118 71.2 120 76.4 120 82.8C120 88.4 117.8 93 113.4 96.6C109 99.8 104 96 90 96Z" fill="currentColor"/>
        </svg>
      </div>

      <!-- Main Quote -->
      <blockquote class="case-testimonial__quote animate-on-scroll">
        <p class="case-testimonial__text">{quote}</p>
      </blockquote>

      <!-- Attribution -->
      <div class="case-testimonial__attribution animate-on-scroll">
        <div class="case-testimonial__line"></div>
        <div class="case-testimonial__author-info">
          {author && <span class="case-testimonial__author">{author}</span>}
          <span class="case-testimonial__role">{role}</span>
          {company && <span class="case-testimonial__company">{company}</span>}
        </div>
      </div>

      <!-- Decorative Corner Elements -->
      <div class="case-testimonial__corner case-testimonial__corner--tl"></div>
      <div class="case-testimonial__corner case-testimonial__corner--br"></div>
    </div>
  </Container>
</section>

<style>
  /* ========================================
     CASE STUDY TESTIMONIAL - Editorial Quote
     ======================================== */
  .case-testimonial {
    position: relative;
    padding: var(--space-24) 0;
    background: #ffffff;
    overflow: hidden;
  }

  /* Background */
  .case-testimonial__bg {
    position: absolute;
    inset: 0;
    z-index: 0;
  }

  .case-testimonial__gradient {
    position: absolute;
    inset: 0;
    background:
      radial-gradient(
        ellipse 80% 100% at 50% 0%,
        rgba(234, 36, 43, 0.03) 0%,
        transparent 50%
      ),
      linear-gradient(
        180deg,
        #ffffff 0%,
        #f8f9fa 100%
      );
  }

  .case-testimonial__pattern {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 800px;
    height: 800px;
    background-image:
      radial-gradient(circle at center, rgba(234, 36, 43, 0.02) 0%, transparent 60%);
    border-radius: 50%;
    pointer-events: none;
  }

  /* Wrapper */
  .case-testimonial__wrapper {
    position: relative;
    z-index: 1;
    max-width: 900px;
    margin: 0 auto;
    padding: var(--space-16) var(--space-12);
    text-align: center;
  }

  /* Quote Mark - Behind the text */
  .case-testimonial__quote-mark {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: rgba(234, 36, 43, 0.06);
    user-select: none;
    z-index: 0;
    animation: quoteFloat 6s ease-in-out infinite;
  }

  @keyframes quoteFloat {
    0%, 100% { transform: translate(-50%, -50%) translateY(0); }
    50% { transform: translate(-50%, -50%) translateY(-10px); }
  }

  /* Main Quote */
  .case-testimonial__quote {
    position: relative;
    z-index: 1;
  }

  .case-testimonial__text {
    font-family: var(--font-display);
    font-size: clamp(1.5rem, 3vw, 2rem);
    font-weight: var(--font-medium);
    line-height: 1.5;
    letter-spacing: -0.01em;
    color: #222222;
    font-style: italic;
    margin: 0;
  }

  /* Attribution */
  .case-testimonial__attribution {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-4);
    margin-top: var(--space-10);
    position: relative;
    z-index: 1;
  }

  .case-testimonial__line {
    width: 60px;
    height: 2px;
    background: var(--color-primary);
    border-radius: var(--radius-full);
  }

  .case-testimonial__author-info {
    display: flex;
    flex-direction: column;
    gap: var(--space-1);
  }

  .case-testimonial__author {
    font-family: var(--font-display);
    font-size: var(--text-lg);
    font-weight: var(--font-semibold);
    color: #111111;
  }

  .case-testimonial__role {
    font-family: var(--font-body);
    font-size: var(--text-base);
    font-weight: var(--font-medium);
    color: var(--color-primary);
  }

  .case-testimonial__company {
    font-family: var(--font-body);
    font-size: var(--text-sm);
    color: #888888;
  }

  /* Corner Decorations */
  .case-testimonial__corner {
    position: absolute;
    width: 80px;
    height: 80px;
    border: 1px solid rgba(234, 36, 43, 0.15);
  }

  .case-testimonial__corner--tl {
    top: 0;
    left: 0;
    border-right: none;
    border-bottom: none;
    border-top-left-radius: var(--radius-lg);
  }

  .case-testimonial__corner--br {
    bottom: 0;
    right: 0;
    border-left: none;
    border-top: none;
    border-bottom-right-radius: var(--radius-lg);
  }

  /* Animation states */
  .animate-on-scroll {
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.8s ease-out, transform 0.8s ease-out;
  }

  .animate-on-scroll.is-visible {
    opacity: 1;
    transform: translateY(0);
  }

  /* Responsive */
  @media (max-width: 768px) {
    .case-testimonial {
      padding: var(--space-16) 0;
    }

    .case-testimonial__wrapper {
      padding: var(--space-12) var(--space-6);
    }

    .case-testimonial__quote-mark svg {
      width: 80px;
      height: 64px;
    }

    .case-testimonial__corner {
      width: 50px;
      height: 50px;
    }
  }
</style>
